var immutable_1 = require('immutable');
var TodoAction = require("../actions/TodoAction");
var TodoModel_1 = require("../TodoModel");
function todos(state, action) {
    if (state === void 0) { state = immutable_1.List(); }
    function indexOf(id) {
        return state.findIndex(function (i) { return i.getKey('modelId') === id; });
    }
    switch (action.type) {
        case TodoAction.ADD_TODO:
            return state.push(action.todoModel);
        case TodoAction.REMOVE_TODO:
            return immutable_1.List(state.filter(function (i) { return i.getKey('modelId') !== action.modelId; }));
        case TodoAction.CLEAR_TODOS:
            return immutable_1.List();
        case TodoAction.EDIT_TODO:
            return state.update(indexOf(action.modelId), function (todoModel) {
                return todoModel.setKey(TodoModel_1.TodoModel, action.key, action.value);
            });
        default:
            return state;
    }
}
exports.todos = todos;

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNvbXBzL2FwcDEvdG9kb3MvcmVkdWNlcnMvdG9kb3JlZHVjZXIudHMiXSwibmFtZXMiOlsidG9kb3MiLCJ0b2Rvcy5pbmRleE9mIl0sIm1hcHBpbmdzIjoiQUFBQSwwQkFBbUIsV0FBVyxDQUFDLENBQUE7QUFDL0IsSUFBWSxVQUFVLFdBQU0sdUJBQXVCLENBQUMsQ0FBQTtBQUNwRCwwQkFBd0IsY0FBYyxDQUFDLENBQUE7QUFXdkMsZUFBc0IsS0FBeUMsRUFBRSxNQUFrQjtJQUE3REEscUJBQXlDQSxHQUF6Q0EsUUFBd0JBLGdCQUFJQSxFQUFhQTtJQUUzREEsaUJBQWlCQSxFQUFTQTtRQUN0QkMsTUFBTUEsQ0FBQ0EsS0FBS0EsQ0FBQ0EsU0FBU0EsQ0FBQ0EsVUFBQ0EsQ0FBV0EsSUFBS0EsT0FBQUEsQ0FBQ0EsQ0FBQ0EsTUFBTUEsQ0FBQ0EsU0FBU0EsQ0FBQ0EsS0FBS0EsRUFBRUEsRUFBMUJBLENBQTBCQSxDQUFDQSxDQUFDQTtJQUN4RUEsQ0FBQ0E7SUFFREQsTUFBTUEsQ0FBQ0EsQ0FBQ0EsTUFBTUEsQ0FBQ0EsSUFBSUEsQ0FBQ0EsQ0FBQ0EsQ0FBQ0E7UUFDbEJBLEtBQUtBLFVBQVVBLENBQUNBLFFBQVFBO1lBQ3BCQSxNQUFNQSxDQUFDQSxLQUFLQSxDQUFDQSxJQUFJQSxDQUFDQSxNQUFNQSxDQUFDQSxTQUFTQSxDQUFDQSxDQUFDQTtRQUN4Q0EsS0FBS0EsVUFBVUEsQ0FBQ0EsV0FBV0E7WUFDdkJBLE1BQU1BLENBQUNBLGdCQUFJQSxDQUFZQSxLQUFLQSxDQUFDQSxNQUFNQSxDQUFDQSxVQUFDQSxDQUFXQSxJQUFLQSxPQUFBQSxDQUFDQSxDQUFDQSxNQUFNQSxDQUFDQSxTQUFTQSxDQUFDQSxLQUFLQSxNQUFNQSxDQUFDQSxPQUFPQSxFQUF0Q0EsQ0FBc0NBLENBQUNBLENBQUNBLENBQUNBO1FBQ2xHQSxLQUFLQSxVQUFVQSxDQUFDQSxXQUFXQTtZQUN2QkEsTUFBTUEsQ0FBQ0EsZ0JBQUlBLEVBQWFBLENBQUNBO1FBQzdCQSxLQUFLQSxVQUFVQSxDQUFDQSxTQUFTQTtZQUNyQkEsTUFBTUEsQ0FBQ0EsS0FBS0EsQ0FBQ0EsTUFBTUEsQ0FBQ0EsT0FBT0EsQ0FBQ0EsTUFBTUEsQ0FBQ0EsT0FBT0EsQ0FBQ0EsRUFBRUEsVUFBQ0EsU0FBbUJBO2dCQUM3REEsTUFBTUEsQ0FBQ0EsU0FBU0EsQ0FBQ0EsTUFBTUEsQ0FBWUEscUJBQVNBLEVBQUVBLE1BQU1BLENBQUNBLEdBQUdBLEVBQUVBLE1BQU1BLENBQUNBLEtBQUtBLENBQUNBLENBQUFBO1lBQzNFQSxDQUFDQSxDQUFDQSxDQUFDQTtRQUNQQTtZQUNJQSxNQUFNQSxDQUFDQSxLQUFLQSxDQUFDQTtJQUNyQkEsQ0FBQ0E7QUFDTEEsQ0FBQ0E7QUFwQmUsYUFBSyxRQW9CcEIsQ0FBQSIsImZpbGUiOiJjb21wcy9hcHAxL3RvZG9zL3JlZHVjZXJzL1RvZG9SZWR1Y2VyLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtMaXN0fSBmcm9tICdpbW11dGFibGUnO1xyXG5pbXBvcnQgKiBhcyBUb2RvQWN0aW9uIGZyb20gXCIuLi9hY3Rpb25zL1RvZG9BY3Rpb25cIjtcclxuaW1wb3J0IHtUb2RvTW9kZWx9IGZyb20gXCIuLi9Ub2RvTW9kZWxcIjtcclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgSVRvZG9BY3Rpb24ge1xyXG4gICAgdHlwZTogc3RyaW5nO1xyXG4gICAgdG9kb01vZGVsOiBUb2RvTW9kZWw7XHJcbiAgICBtb2RlbElkPzogc3RyaW5nLFxyXG4gICAga2V5Pzogc3RyaW5nLFxyXG4gICAgdmFsdWU6IGFueVxyXG5cclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHRvZG9zKHN0YXRlOkxpc3Q8VG9kb01vZGVsPiA9IExpc3Q8VG9kb01vZGVsPigpLCBhY3Rpb246SVRvZG9BY3Rpb24pOkxpc3Q8VG9kb01vZGVsPiB7XHJcblxyXG4gICAgZnVuY3Rpb24gaW5kZXhPZihpZDpzdHJpbmcpIHtcclxuICAgICAgICByZXR1cm4gc3RhdGUuZmluZEluZGV4KChpOlRvZG9Nb2RlbCkgPT4gaS5nZXRLZXkoJ21vZGVsSWQnKSA9PT0gaWQpO1xyXG4gICAgfVxyXG5cclxuICAgIHN3aXRjaCAoYWN0aW9uLnR5cGUpIHtcclxuICAgICAgICBjYXNlIFRvZG9BY3Rpb24uQUREX1RPRE86XHJcbiAgICAgICAgICAgIHJldHVybiBzdGF0ZS5wdXNoKGFjdGlvbi50b2RvTW9kZWwpO1xyXG4gICAgICAgIGNhc2UgVG9kb0FjdGlvbi5SRU1PVkVfVE9ETzpcclxuICAgICAgICAgICAgcmV0dXJuIExpc3Q8VG9kb01vZGVsPihzdGF0ZS5maWx0ZXIoKGk6VG9kb01vZGVsKSA9PiBpLmdldEtleSgnbW9kZWxJZCcpICE9PSBhY3Rpb24ubW9kZWxJZCkpO1xyXG4gICAgICAgIGNhc2UgVG9kb0FjdGlvbi5DTEVBUl9UT0RPUzpcclxuICAgICAgICAgICAgcmV0dXJuIExpc3Q8VG9kb01vZGVsPigpO1xyXG4gICAgICAgIGNhc2UgVG9kb0FjdGlvbi5FRElUX1RPRE86XHJcbiAgICAgICAgICAgIHJldHVybiBzdGF0ZS51cGRhdGUoaW5kZXhPZihhY3Rpb24ubW9kZWxJZCksICh0b2RvTW9kZWw6VG9kb01vZGVsKSA9PiB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdG9kb01vZGVsLnNldEtleTxUb2RvTW9kZWw+KFRvZG9Nb2RlbCwgYWN0aW9uLmtleSwgYWN0aW9uLnZhbHVlKVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICByZXR1cm4gc3RhdGU7XHJcbiAgICB9XHJcbn0iXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=
